# Active Context

## Current Focus

- **OpenRouter-Aligned LLM Model Selection and Workflow:**
  - Transcription: Fixed to `openai/whisper-large-v3` via OpenRouter.
  - Sentence splitting and cleanup: SpaCy (required).
  - LLM correction and summarization: User-selectable from all OpenRouter LLMs, with live price calculation and advanced model selection (search, variants, provider routing, error handling, model details).
  - Diarization: Always performed using `pyannote.audio` locally (requires Hugging Face token and setup).
  - Output: Per-video folders with audio, raw transcript, corrected transcript, summary, metadata (CSV/JSON), diarization, and HTML transcript reader.
  - UI: Correction and summarization dropdowns are populated live from OpenRouter, support search/filter, show model details (provider, context, price, variants, tool calling, structured outputs), and allow advanced selection (variants, provider routing).
  - Robust error handling: All API/network/cache errors are surfaced in the GUI, with clear user feedback and troubleshooting steps.

## Recent Changes

- Model fetching, filtering, and caching now strictly follow OpenRouter API best practices.
- GUI supports advanced model selection, search/filter, and error handling.
- All documentation, memory bank, and planning files updated to reflect OpenRouter's unified API and advanced usage.
- All code, UI, and tests are robust, user-friendly, and ready for production use with OpenRouter.

## Next Steps

- Continue to test the full pipeline with real data and large model lists.
- Monitor for new OpenRouter features (e.g., new model types, advanced routing) and update the workflow as needed.
- Maintain documentation and memory bank alignment with OpenRouter's evolving API and best practices.
- Consider further enhancements:
  - Exporting combined metadata.
  - More granular progress/status reporting.
  - Additional output formats or downstream integrations.

## Active Decisions & Considerations

- No user options for transcription or sentence splitting models.
- All LLM steps (correction, summarization) are user-selectable from OpenRouter, with live pricing and advanced selection.
- Diarization is always performed using pyannote.audio locally.
- Output is always per-video, with all assets grouped and clearly named.
- All error handling and user feedback is surfaced in the GUI, not just logs.

## Patterns & Preferences

- PEP 8 compliance for all Python code.
- Modular, extensible architecture.
- Robust error handling and logging.
- User experience focused on clarity, transparency of cost, and ease of use.
- Strict alignment with OpenRouter's API, model selection, and advanced usage documentation.

## Project Insights

- The project is now fully aligned with OpenRouter's unified API, model selection, and advanced usage patterns.
- All code, UI, and documentation are robust, user-friendly, and ready for production use.
